(()=>{"use strict";const t=(l,n="",r=!0)=>{null!==l&&(null!==l.right&&t(l.right,`${n}${r?"│   ":"    "}`,!1),console.log(`${n}${r?"└── ":"┌── "}${l.data}`),null!==l.left&&t(l.left,`${n}${r?"    ":"│   "}`,!0))};class l{constructor(t){this.data=t,this.left=null,this.right=null}}const n=function t(l){if(l.length<=1)return l;{const n=Math.floor(l.length/2),r=l.slice(0,n),e=l.slice(n);return function(t,l){const n=[];for(;t.length>0&&l.length>0;)if(t[0]<l[0]){const l=t.shift();n.push(l)}else if(t[0]>l[0]){const t=l.shift();n.push(t)}else if(t[0]==l[0]){const r=t.shift();l.shift(),n.push(r)}return n.concat(t,l)}(t(r),t(e))}}([1,7,4,23,8,9,4,3,5,7,9,67,6345,324]),r=new class{constructor(t,l,n){this.root=this.buildTree(t,l,n)}buildTree(t,n,r){if(n>r)return null;const e=Math.floor((n+r)/2),o=new l(t[e]);return o.left=this.buildTree(t,n,e-1),o.right=this.buildTree(t,e+1,r),o}}(n,0,n.length-1);console.log(r),t(r.root),console.log(function(t,l){const n=[],r=[];for(n.push(t);n.length>0;){const t=n.shift();r.push(t.data),t.left&&n.push(t.left),t.right&&n.push(t.right)}return r}(r.root)),console.log(function(t,l){const n=[];return function t(l){null!=l&&(t(l.left),n.push(l.data),t(l.right))}(t),n}(r.root)),function(t,l){let n=function(t,l){let n=t;for(;n;){if(4==n.data)return n;if(0==n.data&&!n.left&&!n.right)return null;4<n.data?n=n.left:4>n.data&&(n=n.right)}}(t);if(!n)return null;if(n.left||n.right||(n.data=null),n.left&&!n.right&&(n.data=n.left.data,n.left=null),!n.left&&n.right&&(n.data=n.right.data,n.right=null),n.left&&n.right){let t=n.right;for(;t.left;)t=t.left;n.data=t.data,n.right=t.right,t.data=null}}(r.root),t(r.root)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQ3BCL0IsRUFBWTRCLEVBQVNHLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaW5hcnktc2VhcmNoLXRyZWUvLi9zcmMvcHJldHR5LXByaW50LmpzIiwid2VicGFjazovL2JpbmFyeS1zZWFyY2gtdHJlZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iaW5hcnktc2VhcmNoLXRyZWUvLi9zcmMvbWVyZ2Utc29ydC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwcmV0dHlQcmludCA9IChub2RlLCBwcmVmaXggPSBcIlwiLCBpc0xlZnQgPSB0cnVlKSA9PiB7XG4gICAgaWYgKG5vZGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG5vZGUucmlnaHQgIT09IG51bGwpIHtcbiAgICAgIHByZXR0eVByaW50KG5vZGUucmlnaHQsIGAke3ByZWZpeH0ke2lzTGVmdCA/IFwi4pSCICAgXCIgOiBcIiAgICBcIn1gLCBmYWxzZSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGAke3ByZWZpeH0ke2lzTGVmdCA/IFwi4pSU4pSA4pSAIFwiIDogXCLilIzilIDilIAgXCJ9JHtub2RlLmRhdGF9YCk7XG4gICAgaWYgKG5vZGUubGVmdCAhPT0gbnVsbCkge1xuICAgICAgcHJldHR5UHJpbnQobm9kZS5sZWZ0LCBgJHtwcmVmaXh9JHtpc0xlZnQgPyBcIiAgICBcIiA6IFwi4pSCICAgXCJ9YCwgdHJ1ZSk7XG4gICAgfVxufTtcblxuZXhwb3J0IHsgcHJldHR5UHJpbnQgfSIsImltcG9ydCB7IG1lcmdlU29ydCwgbWVyZ2UgfSBmcm9tIFwiLi9tZXJnZS1zb3J0XCI7XG5pbXBvcnQgeyBwcmV0dHlQcmludCB9IGZyb20gXCIuL3ByZXR0eS1wcmludFwiO1xuXG4vLyAxXG5jbGFzcyBOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMubGVmdCA9IG51bGw7XG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsO1xuICAgIH1cbn1cblxuLy8gMlxuY2xhc3MgVHJlZSB7XG4gICAgY29uc3RydWN0b3IoYXJyYXksIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgdGhpcy5yb290ID0gdGhpcy5idWlsZFRyZWUoYXJyYXksIHN0YXJ0LCBlbmQpOyAvLyA/XG4gICAgfVxuXG4gICAgLy8gM1xuICAgIGJ1aWxkVHJlZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgICAgICBpZiAoc3RhcnQgPiBlbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWlkcG9pbnQgPSBNYXRoLmZsb29yKChzdGFydCArIGVuZCkgLyAyKTtcbiAgICAgICAgY29uc3Qgcm9vdCA9IG5ldyBOb2RlKGFycmF5W21pZHBvaW50XSk7XG5cbiAgICAgICAgcm9vdC5sZWZ0ID0gdGhpcy5idWlsZFRyZWUoYXJyYXksIHN0YXJ0LCBtaWRwb2ludCAtIDEpO1xuICAgICAgICByb290LnJpZ2h0ID0gdGhpcy5idWlsZFRyZWUoYXJyYXksIG1pZHBvaW50ICsgMSwgZW5kKTtcblxuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG59XG5cbi8vIDRcbmZ1bmN0aW9uIGluc2VydChyb290LCB2YWx1ZSkge1xuICAgIGlmIChyb290ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPCByb290LmRhdGEpIHtcbiAgICAgICAgcm9vdC5sZWZ0ID0gaW5zZXJ0KHJvb3QubGVmdCwgdmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSA+IHJvb3QuZGF0YSkge1xuICAgICAgICByb290LnJpZ2h0ID0gaW5zZXJ0KHJvb3QucmlnaHQsIHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gZGVsZXRlSXRlbShyb290LCB2YWx1ZSkge1xuICAgIGxldCBub2RlVG9EZWxldGUgPSBmaW5kKHJvb3QsIHZhbHVlKTtcblxuICAgIGlmICghbm9kZVRvRGVsZXRlKSB7cmV0dXJuIG51bGw7fVxuXG4gICAgaWYgKCFub2RlVG9EZWxldGUubGVmdCAmJiAhbm9kZVRvRGVsZXRlLnJpZ2h0KSB7XG4gICAgICAgIG5vZGVUb0RlbGV0ZS5kYXRhID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobm9kZVRvRGVsZXRlLmxlZnQgJiYgIW5vZGVUb0RlbGV0ZS5yaWdodCkge1xuICAgICAgICBub2RlVG9EZWxldGUuZGF0YSA9IG5vZGVUb0RlbGV0ZS5sZWZ0LmRhdGE7XG4gICAgICAgIG5vZGVUb0RlbGV0ZS5sZWZ0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIW5vZGVUb0RlbGV0ZS5sZWZ0ICYmIG5vZGVUb0RlbGV0ZS5yaWdodCkge1xuICAgICAgICBub2RlVG9EZWxldGUuZGF0YSA9IG5vZGVUb0RlbGV0ZS5yaWdodC5kYXRhO1xuICAgICAgICBub2RlVG9EZWxldGUucmlnaHQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChub2RlVG9EZWxldGUubGVmdCAmJiBub2RlVG9EZWxldGUucmlnaHQpIHtcbiAgICAgICAgbGV0IGN1cnJlbnROb2RlID0gbm9kZVRvRGVsZXRlLnJpZ2h0O1xuICAgICAgICB3aGlsZSAoY3VycmVudE5vZGUubGVmdCkge1xuICAgICAgICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5sZWZ0O1xuICAgICAgICB9IC8vIGN1cnJlbnQgbm9kZSB3aWxsIGJlIGxlZnRtb3N0IG5vZGUgb24gcmlnaHQgdHJlZVxuICAgICAgICBub2RlVG9EZWxldGUuZGF0YSA9IGN1cnJlbnROb2RlLmRhdGE7XG4gICAgICAgIG5vZGVUb0RlbGV0ZS5yaWdodCA9IGN1cnJlbnROb2RlLnJpZ2h0O1xuICAgICAgICBjdXJyZW50Tm9kZS5kYXRhID0gbnVsbDtcbiAgICB9XG59XG5cbi8vIDVcbmZ1bmN0aW9uIGZpbmQocm9vdCwgdmFsdWUpIHtcbiAgICBsZXQgY3VycmVudE5vZGUgPSByb290O1xuICAgIHdoaWxlIChjdXJyZW50Tm9kZSkge1xuICAgICAgICBpZiAodmFsdWUgPT0gY3VycmVudE5vZGUuZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdmFsdWUgPT0gY3VycmVudE5vZGUuZGF0YSAmJiAhY3VycmVudE5vZGUubGVmdCAmJiAhY3VycmVudE5vZGUucmlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA8IGN1cnJlbnROb2RlLmRhdGEpIHtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUubGVmdDtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA+IGN1cnJlbnROb2RlLmRhdGEpIHtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucmlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIDZcbmZ1bmN0aW9uIGxldmVsT3JkZXIocm9vdCwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBxdWV1ZSA9IFtdO1xuICAgIGNvbnN0IHRyYXZlcnNlZCA9IFtdO1xuICAgIHF1ZXVlLnB1c2gocm9vdCk7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudE5vZGUgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICB0cmF2ZXJzZWQucHVzaChjdXJyZW50Tm9kZS5kYXRhKTtcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLmxlZnQpIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goY3VycmVudE5vZGUubGVmdCk7XG4gICAgICAgIH0gaWYgKGN1cnJlbnROb2RlLnJpZ2h0KSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGN1cnJlbnROb2RlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJhdmVyc2VkO1xufVxuXG4vLyA3XG5mdW5jdGlvbiBpbk9yZGVyKG5vZGUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdHJhdmVyc2VkID0gW107XG4gICAgZnVuY3Rpb24gaW5PcmRlclJlYyhub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbk9yZGVyUmVjKG5vZGUubGVmdCk7XG4gICAgICAgIHRyYXZlcnNlZC5wdXNoKG5vZGUuZGF0YSk7XG4gICAgICAgIGluT3JkZXJSZWMobm9kZS5yaWdodCk7XG4gICAgfVxuICAgIGluT3JkZXJSZWMobm9kZSk7XG4gICAgcmV0dXJuIHRyYXZlcnNlZDtcbn1cblxuY29uc3Qgb2RpbkFycmF5ID0gWzEsIDcsIDQsIDIzLCA4LCA5LCA0LCAzLCA1LCA3LCA5LCA2NywgNjM0NSwgMzI0XTtcbmNvbnN0IHNvcnRlZEFycmF5ID0gbWVyZ2VTb3J0KG9kaW5BcnJheSk7XG5cbmNvbnN0IG9kaW5UcmVlID0gbmV3IFRyZWUoc29ydGVkQXJyYXksIDAsIHNvcnRlZEFycmF5Lmxlbmd0aC0xKTtcbmNvbnNvbGUubG9nKG9kaW5UcmVlKTtcbnByZXR0eVByaW50KG9kaW5UcmVlLnJvb3QpO1xuXG5jb25zb2xlLmxvZyhsZXZlbE9yZGVyKG9kaW5UcmVlLnJvb3QpKTtcbmNvbnNvbGUubG9nKGluT3JkZXIob2RpblRyZWUucm9vdCkpO1xuXG5kZWxldGVJdGVtKG9kaW5UcmVlLnJvb3QsIDQpXG5wcmV0dHlQcmludChvZGluVHJlZS5yb290KTsiLCJmdW5jdGlvbiBtZXJnZVNvcnQoYXJyYXkpIHtcbiAgICBpZiAoYXJyYXkubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1pZHBvaW50ID0gTWF0aC5mbG9vcihhcnJheS5sZW5ndGggLyAyKTtcbiAgICAgICAgY29uc3QgZmlyc3RIYWxmID0gYXJyYXkuc2xpY2UoMCwgbWlkcG9pbnQpO1xuICAgICAgICBjb25zdCBzZWNvbmRIYWxmID0gYXJyYXkuc2xpY2UobWlkcG9pbnQpO1xuXG4gICAgICAgIGNvbnN0IHNvcnRlZEZpcnN0SGFsZiA9IG1lcmdlU29ydChmaXJzdEhhbGYpO1xuICAgICAgICBjb25zdCBzb3J0ZWRTZWNvbmRIYWxmID0gbWVyZ2VTb3J0KHNlY29uZEhhbGYpO1xuXG4gICAgICAgIHJldHVybiBtZXJnZShzb3J0ZWRGaXJzdEhhbGYsIHNvcnRlZFNlY29uZEhhbGYpO1xuICAgIH19XG5cbmZ1bmN0aW9uIG1lcmdlKGZpcnN0SGFsZiwgc2Vjb25kSGFsZikge1xuICAgICAgICBjb25zdCBzb3J0ZWRBcnJheSA9IFtdO1xuXG4gICAgICAgIHdoaWxlIChmaXJzdEhhbGYubGVuZ3RoID4gMCAmJiBzZWNvbmRIYWxmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChmaXJzdEhhbGZbMF0gPCBzZWNvbmRIYWxmWzBdKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc21hbGxlckl0ZW0gPSBmaXJzdEhhbGYuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBzb3J0ZWRBcnJheS5wdXNoKHNtYWxsZXJJdGVtKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlyc3RIYWxmWzBdID4gc2Vjb25kSGFsZlswXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNtYWxsZXJJdGVtID0gc2Vjb25kSGFsZi5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHNvcnRlZEFycmF5LnB1c2goc21hbGxlckl0ZW0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaXJzdEhhbGZbMF0gPT0gc2Vjb25kSGFsZlswXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGZpcnN0SGFsZi5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHNlY29uZEhhbGYuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBzb3J0ZWRBcnJheS5wdXNoKGZpcnN0SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29ydGVkQXJyYXkuY29uY2F0KGZpcnN0SGFsZiwgc2Vjb25kSGFsZik7XG4gICAgfVxuXG5leHBvcnQgeyBtZXJnZVNvcnQsIG1lcmdlIH07Il0sIm5hbWVzIjpbInByZXR0eVByaW50Iiwibm9kZSIsInByZWZpeCIsImlzTGVmdCIsInJpZ2h0IiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJsZWZ0IiwiTm9kZSIsImNvbnN0cnVjdG9yIiwidGhpcyIsInNvcnRlZEFycmF5IiwibWVyZ2VTb3J0IiwiYXJyYXkiLCJsZW5ndGgiLCJtaWRwb2ludCIsIk1hdGgiLCJmbG9vciIsImZpcnN0SGFsZiIsInNsaWNlIiwic2Vjb25kSGFsZiIsInNtYWxsZXJJdGVtIiwic2hpZnQiLCJwdXNoIiwiZmlyc3RJdGVtIiwiY29uY2F0IiwibWVyZ2UiLCJvZGluVHJlZSIsInN0YXJ0IiwiZW5kIiwicm9vdCIsImJ1aWxkVHJlZSIsImNhbGxiYWNrIiwicXVldWUiLCJ0cmF2ZXJzZWQiLCJjdXJyZW50Tm9kZSIsImxldmVsT3JkZXIiLCJpbk9yZGVyUmVjIiwiaW5PcmRlciIsInZhbHVlIiwibm9kZVRvRGVsZXRlIiwiZmluZCIsImRlbGV0ZUl0ZW0iXSwic291cmNlUm9vdCI6IiJ9