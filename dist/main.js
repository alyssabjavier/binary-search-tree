(()=>{"use strict";const t=(l,n="",r=!0)=>{null!==l&&(null!==l.right&&t(l.right,`${n}${r?"│   ":"    "}`,!1),console.log(`${n}${r?"└── ":"┌── "}${l.data}`),null!==l.left&&t(l.left,`${n}${r?"    ":"│   "}`,!0))};class l{constructor(t){this.data=t,this.left=null,this.right=null}}const n=function t(l){if(l.length<=1)return l;{const n=Math.floor(l.length/2),r=l.slice(0,n),e=l.slice(n);return function(t,l){const n=[];for(;t.length>0&&l.length>0;)if(t[0]<l[0]){const l=t.shift();n.push(l)}else if(t[0]>l[0]){const t=l.shift();n.push(t)}else if(t[0]==l[0]){const r=t.shift();l.shift(),n.push(r)}return n.concat(t,l)}(t(r),t(e))}}([1,7,4,23,8,9,4,3,5,7,9,67,6345,324]),r=new class{constructor(t,l,n){this.root=this.buildTree(t,l,n)}buildTree(t,n,r){if(n>r)return null;const e=Math.floor((n+r)/2),o=new l(t[e]);return o.left=this.buildTree(t,n,e-1),o.right=this.buildTree(t,e+1,r),o}}(n,0,n.length-1);console.log(r),t(r.root),console.log(function(t,l){const n=[],r=[];for(n.push(t);n.length>0;){const t=n.shift();r.push(t.data),t.left&&n.push(t.left),t.right&&n.push(t.right)}return r}(r.root)),console.log(function(t,l){const n=[];return function t(l){null!=l&&(t(l.left),n.push(l.data),t(l.right))}(t),n}(r.root)),function(t,l){let n=function(t,l){let n=t;for(;n;){if(4==n.data)return n;if(0==n.data&&!n.left&&!n.right)return null;4<n.data?n=n.left:4>n.data&&(n=n.right)}}(t);if(!n)return null;if(n.left||n.right||(n.data=null),n.left&&!n.right&&(n.data=n.left.data,n.left=null),!n.left&&n.right&&(n.data=n.right.data,n.right=null),n.left&&n.right){let t=n.right;for(;t.left;)t=t.left;n.data=t.data,n.right=t.right,t.data=null}}(r.root),t(r.root)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUNwQi9CLEVBQVk0QixFQUFTRyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmluYXJ5LXNlYXJjaC10cmVlLy4vc3JjL3ByZXR0eS1wcmludC5qcyIsIndlYnBhY2s6Ly9iaW5hcnktc2VhcmNoLXRyZWUvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmluYXJ5LXNlYXJjaC10cmVlLy4vc3JjL21lcmdlLXNvcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcHJldHR5UHJpbnQgPSAobm9kZSwgcHJlZml4ID0gXCJcIiwgaXNMZWZ0ID0gdHJ1ZSkgPT4ge1xuICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChub2RlLnJpZ2h0ICE9PSBudWxsKSB7XG4gICAgICBwcmV0dHlQcmludChub2RlLnJpZ2h0LCBgJHtwcmVmaXh9JHtpc0xlZnQgPyBcIuKUgiAgIFwiIDogXCIgICAgXCJ9YCwgZmFsc2UpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhgJHtwcmVmaXh9JHtpc0xlZnQgPyBcIuKUlOKUgOKUgCBcIiA6IFwi4pSM4pSA4pSAIFwifSR7bm9kZS5kYXRhfWApO1xuICAgIGlmIChub2RlLmxlZnQgIT09IG51bGwpIHtcbiAgICAgIHByZXR0eVByaW50KG5vZGUubGVmdCwgYCR7cHJlZml4fSR7aXNMZWZ0ID8gXCIgICAgXCIgOiBcIuKUgiAgIFwifWAsIHRydWUpO1xuICAgIH1cbn07XG5cbmV4cG9ydCB7IHByZXR0eVByaW50IH0iLCJpbXBvcnQgeyBtZXJnZVNvcnQsIG1lcmdlIH0gZnJvbSBcIi4vbWVyZ2Utc29ydFwiO1xuaW1wb3J0IHsgcHJldHR5UHJpbnQgfSBmcm9tIFwiLi9wcmV0dHktcHJpbnRcIjtcblxuLy8gMVxuY2xhc3MgTm9kZSB7XG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLmxlZnQgPSBudWxsO1xuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbDtcbiAgICB9XG59XG5cbi8vIDJcbmNsYXNzIFRyZWUge1xuICAgIGNvbnN0cnVjdG9yKGFycmF5LCBzdGFydCwgZW5kKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXMuYnVpbGRUcmVlKGFycmF5LCBzdGFydCwgZW5kKTsgLy8gP1xuICAgIH1cblxuICAgIC8vIDNcbiAgICBidWlsZFRyZWUoYXJyYXksIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1pZHBvaW50ID0gTWF0aC5mbG9vcigoc3RhcnQgKyBlbmQpIC8gMik7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBuZXcgTm9kZShhcnJheVttaWRwb2ludF0pO1xuXG4gICAgICAgIHJvb3QubGVmdCA9IHRoaXMuYnVpbGRUcmVlKGFycmF5LCBzdGFydCwgbWlkcG9pbnQgLSAxKTtcbiAgICAgICAgcm9vdC5yaWdodCA9IHRoaXMuYnVpbGRUcmVlKGFycmF5LCBtaWRwb2ludCArIDEsIGVuZCk7XG5cbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxufVxuXG4vLyA0XG5mdW5jdGlvbiBpbnNlcnQocm9vdCwgdmFsdWUpIHtcbiAgICBpZiAocm9vdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlIDwgcm9vdC5kYXRhKSB7XG4gICAgICAgIHJvb3QubGVmdCA9IGluc2VydChyb290LmxlZnQsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPiByb290LmRhdGEpIHtcbiAgICAgICAgcm9vdC5yaWdodCA9IGluc2VydChyb290LnJpZ2h0LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvb3Q7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUl0ZW0ocm9vdCwgdmFsdWUpIHtcbiAgICBsZXQgbm9kZVRvRGVsZXRlID0gZmluZChyb290LCB2YWx1ZSk7XG5cbiAgICBpZiAoIW5vZGVUb0RlbGV0ZSkge3JldHVybiBudWxsO31cblxuICAgIGlmICghbm9kZVRvRGVsZXRlLmxlZnQgJiYgIW5vZGVUb0RlbGV0ZS5yaWdodCkge1xuICAgICAgICBub2RlVG9EZWxldGUuZGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKG5vZGVUb0RlbGV0ZS5sZWZ0ICYmICFub2RlVG9EZWxldGUucmlnaHQpIHtcbiAgICAgICAgbm9kZVRvRGVsZXRlLmRhdGEgPSBub2RlVG9EZWxldGUubGVmdC5kYXRhO1xuICAgICAgICBub2RlVG9EZWxldGUubGVmdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFub2RlVG9EZWxldGUubGVmdCAmJiBub2RlVG9EZWxldGUucmlnaHQpIHtcbiAgICAgICAgbm9kZVRvRGVsZXRlLmRhdGEgPSBub2RlVG9EZWxldGUucmlnaHQuZGF0YTtcbiAgICAgICAgbm9kZVRvRGVsZXRlLnJpZ2h0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobm9kZVRvRGVsZXRlLmxlZnQgJiYgbm9kZVRvRGVsZXRlLnJpZ2h0KSB7XG4gICAgICAgIGxldCBjdXJyZW50Tm9kZSA9IG5vZGVUb0RlbGV0ZS5yaWdodDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnROb2RlLmxlZnQpIHtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUubGVmdDtcbiAgICAgICAgfSAvLyBjdXJyZW50IG5vZGUgd2lsbCBiZSBsZWZ0bW9zdCBub2RlIG9uIHJpZ2h0IHRyZWVcbiAgICAgICAgbm9kZVRvRGVsZXRlLmRhdGEgPSBjdXJyZW50Tm9kZS5kYXRhO1xuICAgICAgICBub2RlVG9EZWxldGUucmlnaHQgPSBjdXJyZW50Tm9kZS5yaWdodDtcbiAgICAgICAgY3VycmVudE5vZGUuZGF0YSA9IG51bGw7XG4gICAgfVxufVxuXG4vLyA1XG5mdW5jdGlvbiBmaW5kKHJvb3QsIHZhbHVlKSB7XG4gICAgbGV0IGN1cnJlbnROb2RlID0gcm9vdDtcbiAgICB3aGlsZSAoY3VycmVudE5vZGUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09IGN1cnJlbnROb2RlLmRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZhbHVlID09IGN1cnJlbnROb2RlLmRhdGEgJiYgIWN1cnJlbnROb2RlLmxlZnQgJiYgIWN1cnJlbnROb2RlLnJpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPCBjdXJyZW50Tm9kZS5kYXRhKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLmxlZnQ7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPiBjdXJyZW50Tm9kZS5kYXRhKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnJpZ2h0O1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyA2XG5mdW5jdGlvbiBsZXZlbE9yZGVyKHJvb3QsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcXVldWUgPSBbXTtcbiAgICBjb25zdCB0cmF2ZXJzZWQgPSBbXTtcbiAgICBxdWV1ZS5wdXNoKHJvb3QpO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgdHJhdmVyc2VkLnB1c2goY3VycmVudE5vZGUuZGF0YSk7XG4gICAgICAgIGlmIChjdXJyZW50Tm9kZS5sZWZ0KSB7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGN1cnJlbnROb2RlLmxlZnQpO1xuICAgICAgICB9IGlmIChjdXJyZW50Tm9kZS5yaWdodCkge1xuICAgICAgICAgICAgcXVldWUucHVzaChjdXJyZW50Tm9kZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRyYXZlcnNlZDtcbn1cblxuLy8gN1xuZnVuY3Rpb24gaW5PcmRlcihub2RlLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHRyYXZlcnNlZCA9IFtdO1xuICAgIGZ1bmN0aW9uIGluT3JkZXJSZWMobm9kZSkge1xuICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaW5PcmRlclJlYyhub2RlLmxlZnQpO1xuICAgICAgICB0cmF2ZXJzZWQucHVzaChub2RlLmRhdGEpO1xuICAgICAgICBpbk9yZGVyUmVjKG5vZGUucmlnaHQpO1xuICAgIH1cbiAgICBpbk9yZGVyUmVjKG5vZGUpO1xuICAgIHJldHVybiB0cmF2ZXJzZWQ7XG59XG5cbmZ1bmN0aW9uIHByZU9yZGVyKG5vZGUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdHJhdmVyc2VkID0gW107XG4gICAgZnVuY3Rpb24gcHJlT3JkZXJSZWMobm9kZSkge1xuICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJhdmVyc2VkLnB1c2gobm9kZS5kYXRhKTtcbiAgICAgICAgcHJlT3JkZXJSZWMobm9kZS5sZWZ0KTtcbiAgICAgICAgcHJlT3JkZXJSZWMobm9kZS5yaWdodCk7XG4gICAgfVxuICAgIHByZU9yZGVyUmVjKG5vZGUpO1xuICAgIHJldHVybiB0cmF2ZXJzZWQ7XG59XG5cbmZ1bmN0aW9uIHBvc3RPcmRlcihub2RlLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHRyYXZlcnNlZCA9IFtdO1xuICAgIGZ1bmN0aW9uIHBvc3RPcmRlclJlYyhub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwb3N0T3JkZXJSZWMobm9kZS5sZWZ0KTtcbiAgICAgICAgcG9zdE9yZGVyUmVjKG5vZGUucmlnaHQpO1xuICAgICAgICB0cmF2ZXJzZWQucHVzaChub2RlLmRhdGEpO1xuICAgIH1cbiAgICBwb3N0T3JkZXJSZWMobm9kZSk7XG4gICAgcmV0dXJuIHRyYXZlcnNlZDtcbn1cblxuY29uc3Qgb2RpbkFycmF5ID0gWzEsIDcsIDQsIDIzLCA4LCA5LCA0LCAzLCA1LCA3LCA5LCA2NywgNjM0NSwgMzI0XTtcbmNvbnN0IHNvcnRlZEFycmF5ID0gbWVyZ2VTb3J0KG9kaW5BcnJheSk7XG5cbmNvbnN0IG9kaW5UcmVlID0gbmV3IFRyZWUoc29ydGVkQXJyYXksIDAsIHNvcnRlZEFycmF5Lmxlbmd0aC0xKTtcbmNvbnNvbGUubG9nKG9kaW5UcmVlKTtcbnByZXR0eVByaW50KG9kaW5UcmVlLnJvb3QpO1xuXG5jb25zb2xlLmxvZyhsZXZlbE9yZGVyKG9kaW5UcmVlLnJvb3QpKTtcbmNvbnNvbGUubG9nKGluT3JkZXIob2RpblRyZWUucm9vdCkpO1xuXG5kZWxldGVJdGVtKG9kaW5UcmVlLnJvb3QsIDQpXG5wcmV0dHlQcmludChvZGluVHJlZS5yb290KTsiLCJmdW5jdGlvbiBtZXJnZVNvcnQoYXJyYXkpIHtcbiAgICBpZiAoYXJyYXkubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1pZHBvaW50ID0gTWF0aC5mbG9vcihhcnJheS5sZW5ndGggLyAyKTtcbiAgICAgICAgY29uc3QgZmlyc3RIYWxmID0gYXJyYXkuc2xpY2UoMCwgbWlkcG9pbnQpO1xuICAgICAgICBjb25zdCBzZWNvbmRIYWxmID0gYXJyYXkuc2xpY2UobWlkcG9pbnQpO1xuXG4gICAgICAgIGNvbnN0IHNvcnRlZEZpcnN0SGFsZiA9IG1lcmdlU29ydChmaXJzdEhhbGYpO1xuICAgICAgICBjb25zdCBzb3J0ZWRTZWNvbmRIYWxmID0gbWVyZ2VTb3J0KHNlY29uZEhhbGYpO1xuXG4gICAgICAgIHJldHVybiBtZXJnZShzb3J0ZWRGaXJzdEhhbGYsIHNvcnRlZFNlY29uZEhhbGYpO1xuICAgIH19XG5cbmZ1bmN0aW9uIG1lcmdlKGZpcnN0SGFsZiwgc2Vjb25kSGFsZikge1xuICAgICAgICBjb25zdCBzb3J0ZWRBcnJheSA9IFtdO1xuXG4gICAgICAgIHdoaWxlIChmaXJzdEhhbGYubGVuZ3RoID4gMCAmJiBzZWNvbmRIYWxmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChmaXJzdEhhbGZbMF0gPCBzZWNvbmRIYWxmWzBdKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc21hbGxlckl0ZW0gPSBmaXJzdEhhbGYuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBzb3J0ZWRBcnJheS5wdXNoKHNtYWxsZXJJdGVtKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlyc3RIYWxmWzBdID4gc2Vjb25kSGFsZlswXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNtYWxsZXJJdGVtID0gc2Vjb25kSGFsZi5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHNvcnRlZEFycmF5LnB1c2goc21hbGxlckl0ZW0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaXJzdEhhbGZbMF0gPT0gc2Vjb25kSGFsZlswXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGZpcnN0SGFsZi5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHNlY29uZEhhbGYuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBzb3J0ZWRBcnJheS5wdXNoKGZpcnN0SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29ydGVkQXJyYXkuY29uY2F0KGZpcnN0SGFsZiwgc2Vjb25kSGFsZik7XG4gICAgfVxuXG5leHBvcnQgeyBtZXJnZVNvcnQsIG1lcmdlIH07Il0sIm5hbWVzIjpbInByZXR0eVByaW50Iiwibm9kZSIsInByZWZpeCIsImlzTGVmdCIsInJpZ2h0IiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJsZWZ0IiwiTm9kZSIsImNvbnN0cnVjdG9yIiwidGhpcyIsInNvcnRlZEFycmF5IiwibWVyZ2VTb3J0IiwiYXJyYXkiLCJsZW5ndGgiLCJtaWRwb2ludCIsIk1hdGgiLCJmbG9vciIsImZpcnN0SGFsZiIsInNsaWNlIiwic2Vjb25kSGFsZiIsInNtYWxsZXJJdGVtIiwic2hpZnQiLCJwdXNoIiwiZmlyc3RJdGVtIiwiY29uY2F0IiwibWVyZ2UiLCJvZGluVHJlZSIsInN0YXJ0IiwiZW5kIiwicm9vdCIsImJ1aWxkVHJlZSIsImNhbGxiYWNrIiwicXVldWUiLCJ0cmF2ZXJzZWQiLCJjdXJyZW50Tm9kZSIsImxldmVsT3JkZXIiLCJpbk9yZGVyUmVjIiwiaW5PcmRlciIsInZhbHVlIiwibm9kZVRvRGVsZXRlIiwiZmluZCIsImRlbGV0ZUl0ZW0iXSwic291cmNlUm9vdCI6IiJ9